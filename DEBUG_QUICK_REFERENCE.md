# 调试日志快速参考

## 🚀 快速开始

### 查看日志
1. 按 `F12` 打开浏览器控制台
2. 切换到 **Console** 标签
3. 所有操作都会自动输出日志

### 控制日志

```javascript
// 禁用日志
DEBUG.enabled = false;

// 启用日志
DEBUG.enabled = true;
```

---

## 📊 日志类型

| 图标 | 类型 | 用途 |
|------|------|------|
| 🔍 | 一般 | 函数调用、变量值 |
| ℹ️ | 信息 | 重要状态变化 |
| ✅ | 成功 | 操作成功 |
| ⚠️ | 警告 | 配置不完整、解析失败 |
| ❌ | 错误 | 请求失败、异常 |
| ⏱️ | 计时 | 性能分析 |

---

## 🔍 快速过滤

在控制台过滤框输入：

```
🔍        # 一般日志
✅        # 成功日志
❌        # 错误日志
⚠️        # 警告日志
网络请求   # 网络相关
配置      # 配置相关
```

---

## 📝 常见日志

### 页面加载
```
ℹ️ 脚本开始加载
ℹ️ 页面加载完成，开始初始化
⏱️ 页面初始化: 15.234ms
✅ 页面初始化完成
```

### 测试请求
```
🔍 ========== 开始测试 ==========
ℹ️ 测试场景: openai_tools
🔍 网络请求
  🔍 请求 URL: https://api.openai.com/v1/chat/completions
  🔍 响应状态: 200 OK
  ⏱️ 请求耗时: 1234.56ms
✅ 测试成功
⏱️ 测试总耗时: 2567.89ms
🔍 ========== 测试结束 ==========
```

### 错误信息
```
❌ 测试过程中发生错误: Error: HTTP 401
🔍 错误详情
  🔍 错误消息: HTTP 401
  🔍 错误状态码: 401
  🔍 响应文本预览: {"error":{"message":"Incorrect API key..."}}
```

---

## 🛠️ 常见问题

### 请求失败 (401)
```
❌ HTTP 401
```
**解决**: 检查 API Key 是否正确

### 返回 HTML
```
⚠️ JSON 解析失败
🔍 响应文本预览: <!DOCTYPE html>...
```
**解决**: 检查 API URL 是否正确

### 未触发工具调用
```
⚠️ 未检测到工具调用
```
**解决**: 修改用户消息，使其更明确

---

## ⚡ 性能分析

### 查看耗时
```
⏱️ 页面初始化: 15.234ms
⏱️ 请求耗时: 1234.56ms
⏱️ 测试总耗时: 2567.89ms
```

### 正常范围
- 页面初始化: < 100ms
- 单次请求: 500-5000ms
- 测试总耗时: 1000-10000ms

---

## 🔐 安全特性

API Key 自动脱敏：
```
🔍 API Key: sk-proj...xyz
```

只显示前 7 位和后 4 位，中间用 `...` 代替。

---

## 📚 详细文档

- [DEBUG_LOGS.md](DEBUG_LOGS.md) - 完整使用说明
- [DEBUG.md](DEBUG.md) - 调试指南
- [AGENTS.md](AGENTS.md) - 项目文档

---

## 💡 提示

1. **保留日志**: 勾选控制台的 "Preserve log" 选项
2. **清空日志**: 点击 🚫 图标或按 `Ctrl+L`
3. **导出日志**: 右键 → Save as...
4. **复制日志**: 右键 → Copy

---

**最后更新**: 2025-10-21
